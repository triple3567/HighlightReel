<!DOCTYPE html>
<html>
<head>
  <title>Image Display</title>
  <meta name="viewport" content="width=device-width, height=device.height, initial-scale=1.0">
  <script>
    function updateImageSize() {
      var image = document.getElementById("image");
      var viewportWidth = window.innerWidth;
      image.width = viewportWidth

      var updateButton = document.getElementById("update-button");
    }
  </script>
</head>
<body onload="updateImageSize()">
  <img id="image" src="res/capture.jpg" alt="Initial Image">
  <button id="update-button">Update Image</button>

  <script>
    var updateButton = document.getElementById("update-button");
    updateButton.addEventListener("click", function() {
      var image = document.getElementById("image");
      image.src = "res/loading.jpg";
      fetch("/camera/refresh")
        .then(response => response.blob())
        .then(blob => {
          image.src = URL.createObjectURL(blob);
        });
    });
    window.onresize = updateImageSize;
  </script>
</body>
</html>